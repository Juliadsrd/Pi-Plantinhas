<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sr. Vaso - Monitor de Vasos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <!-- Tela de Login -->
    <div class="login-container" id="login-screen">
        <h1>Bem-vindo √† plataforma</h1>
        <form id="login-form">
            <label for="login-email">E-mail</label>
            <input type="email" id="login-email" required>

            <label for="login-password">Senha</label>
            <input type="password" id="login-password" required>

            <button type="submit">Entrar</button>
        </form>
        <a href="#" id="link-to-signup">Crie seu cadastro</a>
    </div>

    <!-- Tela de Cadastro -->
    <div class="signup-container" id="signup-screen" style="display: none;">
        <div class="profile-icon">üë§</div>
        <h2>Crie seu cadastro</h2>
        <form id="signup-form">
            <label for="signup-nome">Nome</label>
            <input type="text" id="signup-nome" required>
            <label for="signup-sobrenome">Sobrenome</label>
            <input type="text" id="signup-sobrenome" required>
            <label for="signup-email">E-mail</label>
            <input type="email" id="signup-email" required>
            <label for="signup-password">Senha</label>
            <input type="password" id="signup-password" required>
            <button type="submit">Cadastrar</button>
        </form>
    </div>

    <!-- Tela Principal (Home) -->
    <div id="main-screen" class="home-container" style="display: none;">
        <!-- Menu Lateral -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-profile">
                    <div class="sidebar-avatar">üë§</div>
                    <span class="sidebar-username" id="sidebar-username">Usu√°rio</span>
                </div>
                <button class="sidebar-close" id="sidebar-close">‚úï</button>
            </div>
            <nav class="sidebar-menu">
                <div class="sidebar-section">
                    <span class="sidebar-section-title">Vasos</span>
                    <button class="sidebar-item" id="sidebar-my-pots">
                        <span class="sidebar-icon"></span>
                        Gerenciar Vasos
                    </button>
                    <button class="sidebar-item" id="sidebar-add-pot">
                        <span class="sidebar-icon"></span>
                        Adicionar Vaso
                    </button>
                </div>
                <div class="sidebar-section">
                    <span class="sidebar-section-title">Conta</span>
                    <button class="sidebar-item" id="sidebar-account">
                        <span class="sidebar-icon"></span>
                        Configura√ß√µes
                    </button>
                    <button class="sidebar-item" id="sidebar-profile">
                        <span class="sidebar-icon"></span>
                        Meu Perfil
                    </button>
                </div>
                <button class="sidebar-item sidebar-logout" id="sidebar-logout">
                    <span class="sidebar-icon"></span>
                    Sair
                </button>
            </nav>
        </div>
        <!-- Overlay para fechar sidebar -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <header class="brand-header">
            <button class="menu-toggle" id="menu-toggle">‚ò∞</button>
            <img src="{{ url_for('static', filename='Sr.Vaso.png') }}" alt="Logotipo" class="brand-logo"/>
            <span class="brand-title">Sr. Vaso</span>
        </header>

        <div class="plant-content">
            <div class="plant-image-section">
                <div class="plant-select">
                    <label for="select-pot">Selecione o vaso:</label>
                    <select id="select-pot">
                        <option value="">Nenhum vaso cadastrado</option>
                    </select>
                </div>
                <div class="plant-select">
                    <label for="select-plant">Tipo de planta:</label>
                    <select id="select-plant">
                        <option value="1">Tulipa</option>
                        <option value="2">Suculenta</option>
                        <option value="3">Orqu√≠deas</option>
                    </select>
                </div>
                <img id="plant-image" src="{{ url_for('static', filename='tulipa.png') }}" alt="Imagem da Planta" />
            </div>
            <div class="plant-info">
                <div id="plant-message" class="plant-msg">A planta est√° bem</div>

                <div class="status-indicators">
                    <div class="status-item">
                        <span class="status-label">Umidade</span>
                        <div class="status-value">
                            <span id="humidity-value">70%</span>
                            <div class="status-light" id="humidity-light"></div>
                        </div>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Temperatura</span>
                        <div class="status-value">
                            <span id="temp-value">31¬∞C</span>
                            <div class="status-light" id="temp-light"></div>
                        </div>
                    </div>
                </div>

                <!-- Bloco com dados reais vindos da ESP32 (backend Flask) -->
                <div class="plant-details" style="margin-top: 1rem;">
                    <h3>√öltima leitura do sensor (ESP32)</h3>
                    <div class="detail-row">
                        <span class="detail-label">Umidade do solo:</span>
                        <span class="detail-value" id="backend-humidity">{{ data.umidade_solo }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">√öltima atualiza√ß√£o:</span>
                        <span class="detail-value" id="backend-timestamp">{{ data.timestamp }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Endpoint da ESP32:</span>
                        <span class="detail-value">POST em <code>/dados</code></span>
                    </div>
                </div>

                <div class="plant-details">
                    <h3>Informa√ß√µes da Planta</h3>
                    <div class="detail-row">
                        <span class="detail-label">ID do Vaso:</span>
                        <span class="detail-value" id="pot-id">-</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Nome:</span>
                        <span class="detail-value" id="plant-name">-</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Tipo:</span>
                        <span class="detail-value" id="plant-type">-</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Status do sensor:</span>
                        <span class="detail-value" style="color: #4caf50;">‚óè Ativo</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Widget de Chat com IA (prot√≥tipo) -->
        <div class="chat-widget" id="chat-widget">
            <button class="chat-toggle" id="chat-toggle">üí¨ Dicas da IA</button>
            <div class="chat-window" id="chat-window" style="display: none;">
                <div class="chat-header">
                    <span>Assistente de Cuidados com Plantas</span>
                    <button class="chat-close" id="chat-close">‚úï</button>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="chat-message chat-message-bot">
                        <span class="chat-author">IA</span>
                        <p>Ol√°! Eu sou sua assistente virtual de plantas. Pergunte algo como "Com que frequ√™ncia devo regar minha suculenta?"</p>
                    </div>
                </div>
                <form class="chat-input-area" id="chat-form">
                    <input type="text" id="chat-input" placeholder="Digite sua d√∫vida sobre cuidados..." autocomplete="off" required />
                    <button type="submit">Enviar</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Adicionar Vaso -->
    <div id="add-pot-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Adicionar Novo Vaso</h2>
                <button class="modal-close" id="close-add-pot">‚úï</button>
            </div>
            <form id="add-pot-form">
                <label for="pot-id-input">ID do Vaso</label>
                <input type="text" id="pot-id-input" placeholder="Ex: VASO001" required>

                <label for="pot-name-input">Nome do Vaso (opcional)</label>
                <input type="text" id="pot-name-input" placeholder="Ex: Jardim da Sala">

                <label for="pot-plant-type">Tipo de Planta</label>
                <select id="pot-plant-type" required>
                    <option value="">Selecione...</option>
                    <option value="1">Tulipa</option>
                    <option value="2">Suculenta</option>
                    <option value="3">Orqu√≠deas</option>
                </select>

                <button type="submit" class="btn-primary">Adicionar Vaso</button>
            </form>
        </div>
    </div>

    <!-- Modal: Gerenciar Vasos -->
    <div id="manage-pots-modal" class="modal" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Meus Vasos</h2>
                <button class="modal-close" id="close-manage-pots">‚úï</button>
            </div>
            <div id="pots-list" class="pots-grid">
                <!-- Vasos ser√£o inseridos aqui dinamicamente -->
            </div>
            <div class="empty-state" id="empty-pots" style="display: none;">
                <span class="empty-icon">üè∫</span>
                <p>Voc√™ ainda n√£o cadastrou nenhum vaso</p>
                <button class="btn-primary" id="add-first-pot">Adicionar Primeiro Vaso</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>